{"ast":null,"code":"import React,{useState,useEffect,lazy,Suspense}from'react';import{Routes,Route,Navigate,useNavigate}from'react-router-dom';import axios from'axios';// Lazy-loaded components for optimization\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=/*#__PURE__*/lazy(()=>import('./components/Login'));const Home=/*#__PURE__*/lazy(()=>import('./components/Home'));const Game=/*#__PURE__*/lazy(()=>import('./components/Game'));const AIGame=/*#__PURE__*/lazy(()=>import('./components/AIGame'));function App(){const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);const navigate=useNavigate();useEffect(()=>{// Check if user is already logged in\nconst checkLoginStatus=async()=>{try{const token=localStorage.getItem('user');if(token){setUser(JSON.parse(token));}}catch(error){console.error('Error checking login status:',error);localStorage.removeItem('user');}finally{setLoading(false);}};checkLoginStatus();},[]);const handleLogin=userData=>{setUser(userData);localStorage.setItem('user',JSON.stringify(userData));navigate('/home');};const handleLogout=async()=>{try{await axios.post('/api/logout');setUser(null);localStorage.removeItem('user');navigate('/');}catch(error){console.error('Error logging out:',error);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"container\",style:{justifyContent:'center',minHeight:'100vh'},children:/*#__PURE__*/_jsx(\"h1\",{className:\"title\",children:\"Loading the Chaos...\"})});}return/*#__PURE__*/_jsx(Suspense,{fallback:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"title\",children:\"Loading...\"})}),children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:user?/*#__PURE__*/_jsx(Navigate,{to:\"/home\"}):/*#__PURE__*/_jsx(Login,{onLogin:handleLogin})}),/*#__PURE__*/_jsx(Route,{path:\"/home\",element:user?/*#__PURE__*/_jsx(Home,{user:user,onLogout:handleLogout}):/*#__PURE__*/_jsx(Navigate,{to:\"/\"})}),/*#__PURE__*/_jsx(Route,{path:\"/game/:roomCode\",element:user?/*#__PURE__*/_jsx(Game,{user:user,onLogout:handleLogout}):/*#__PURE__*/_jsx(Navigate,{to:\"/\"})}),/*#__PURE__*/_jsx(Route,{path:\"/ai-game\",element:user?/*#__PURE__*/_jsx(AIGame,{user:user,onLogout:handleLogout}):/*#__PURE__*/_jsx(Navigate,{to:\"/\"})})]})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","lazy","Suspense","Routes","Route","Navigate","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","Login","Home","Game","AIGame","App","user","setUser","loading","setLoading","navigate","checkLoginStatus","token","localStorage","getItem","JSON","parse","error","console","removeItem","handleLogin","userData","setItem","stringify","handleLogout","post","className","style","justifyContent","minHeight","children","fallback","path","element","to","onLogin","onLogout"],"sources":["C:/Users/Majid/Downloads/ticktac/client/src/App.js"],"sourcesContent":["import React, { useState, useEffect, lazy, Suspense } from 'react';\r\nimport { Routes, Route, Navigate, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\n// Lazy-loaded components for optimization\r\nconst Login = lazy(() => import('./components/Login'));\r\nconst Home = lazy(() => import('./components/Home'));\r\nconst Game = lazy(() => import('./components/Game'));\r\nconst AIGame = lazy(() => import('./components/AIGame'));\r\n\r\nfunction App() {\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    // Check if user is already logged in\r\n    const checkLoginStatus = async () => {\r\n      try {\r\n        const token = localStorage.getItem('user');\r\n        if (token) {\r\n          setUser(JSON.parse(token));\r\n        }\r\n      } catch (error) {\r\n        console.error('Error checking login status:', error);\r\n        localStorage.removeItem('user');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    checkLoginStatus();\r\n  }, []);\r\n\r\n  const handleLogin = (userData) => {\r\n    setUser(userData);\r\n    localStorage.setItem('user', JSON.stringify(userData));\r\n    navigate('/home');\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      await axios.post('/api/logout');\r\n      setUser(null);\r\n      localStorage.removeItem('user');\r\n      navigate('/');\r\n    } catch (error) {\r\n      console.error('Error logging out:', error);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"container\" style={{ justifyContent: 'center', minHeight: '100vh' }}>\r\n        <h1 className=\"title\">Loading the Chaos...</h1>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Suspense fallback={<div className=\"container\"><h1 className=\"title\">Loading...</h1></div>}>\r\n      <Routes>\r\n        <Route \r\n          path=\"/\" \r\n          element={user ? <Navigate to=\"/home\" /> : <Login onLogin={handleLogin} />} \r\n        />\r\n        <Route \r\n          path=\"/home\" \r\n          element={user ? <Home user={user} onLogout={handleLogout} /> : <Navigate to=\"/\" />} \r\n        />\r\n        <Route \r\n          path=\"/game/:roomCode\" \r\n          element={user ? <Game user={user} onLogout={handleLogout} /> : <Navigate to=\"/\" />} \r\n        />\r\n        <Route \r\n          path=\"/ai-game\" \r\n          element={user ? <AIGame user={user} onLogout={handleLogout} /> : <Navigate to=\"/\" />} \r\n        />\r\n      </Routes>\r\n    </Suspense>\r\n  );\r\n}\r\n\r\nexport default App; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}