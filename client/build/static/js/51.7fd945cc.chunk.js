"use strict";(self.webpackChunkticktac_client=self.webpackChunkticktac_client||[]).push([[51],{51:(e,s,t)=>{t.r(s),t.d(s,{default:()=>c});var a=t(43),o=t(216),n=t(104),r=t(579);const l=e=>{let{user:s,onLogout:t}=e;const{roomCode:l}=(0,o.g)(),c=(0,o.Zp)(),[m,i]=(0,a.useState)(null),[u,d]=(0,a.useState)(null),[_,h]=(0,a.useState)(null),[g,f]=(0,a.useState)("Connecting to the chaos..."),[b,p]=(0,a.useState)(!1),[j,k]=(0,a.useState)(""),[x,v]=(0,a.useState)("");(0,a.useEffect)((()=>{const e=(0,n.io)();return i(e),()=>{e.disconnect()}}),[]),(0,a.useEffect)((()=>{if(m&&s)return m.on("connect",(()=>{m.emit("join_room",{room_code:l})})),m.on("error",(e=>{v(e.message),f("Error joined the room"),setTimeout((()=>{c("/home")}),3e3)})),m.on("room_joined",(e=>{d(e.game_state),h(e.player_symbol),f(`You joined as ${e.player_symbol}. ${"waiting"===e.game_state.status?"Waiting for opponent...":`${e.game_state.current_turn}'s turn!`}`)})),m.on("player_joined",(e=>{d(e.game_state),f(`${e.username} joined as ${e.player_symbol}. ${e.player_symbol}'s turn!`)})),m.on("move_made",(e=>{d(e.game_state);const s=e.next_turn===_?"Your":`${e.game_state.players[e.next_turn].username}'s`;f(`${s} turn, ${e.next_turn===_?"asshole":"waitin' on that dumb fuck"}!`);const t=document.querySelector(".game-status");t.classList.add("shake"),setTimeout((()=>{t.classList.remove("shake")}),500)})),m.on("game_over",(e=>{d(e.game_state),f(e.message),k("Game's over, you chaotic bastards! Thanks for the mess!"),p(!0),setTimeout((()=>{p(!1)}),4e3)})),m.on("game_reset",(e=>{d(e.game_state),f(`Game reset! ${e.game_state.current_turn}'s turn!`)})),()=>{m.off("connect"),m.off("error"),m.off("room_joined"),m.off("player_joined"),m.off("move_made"),m.off("game_over"),m.off("game_reset")}}),[m,s,_,l,c]);const y=(0,a.useCallback)((e=>{m&&u&&_&&u.current_turn===_&&null===u.board[e]&&"playing"===u.status&&m.emit("make_move",{room_code:l,cell_index:e,player_symbol:_})}),[m,u,_,l]),N=(0,a.useCallback)((()=>{m&&m.emit("reset_game",{room_code:l})}),[m,l]),C=(0,a.useCallback)((()=>{c("/home")}),[c]),$=(0,a.useMemo)((()=>u?(0,r.jsx)("div",{className:"game-board",children:u.board.map(((e,s)=>(0,r.jsx)("div",{className:`cell ${e?e.toLowerCase():""}`,onClick:()=>y(s),children:e},s)))}):null),[u,y]);return x?(0,r.jsxs)("div",{className:"container",children:[(0,r.jsx)("h1",{className:"title",children:"Error"}),(0,r.jsx)("div",{className:"error-message",children:x}),(0,r.jsx)("button",{className:"button",onClick:C,children:"Back to Home"})]}):(0,r.jsxs)("div",{className:"container",children:[b&&(0,r.jsx)("div",{className:"game-over-banner",children:j}),(0,r.jsx)("h1",{className:"title",children:"Tic Tac Toe Shitshow"}),(0,r.jsxs)("div",{className:"room-code",children:["Room: ",l]}),(0,r.jsx)("div",{className:"game-status "+(g.includes("turn")?"shake":""),children:g}),$,(0,r.jsxs)("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[(0,r.jsx)("button",{className:"button",onClick:N,disabled:!u||"winner"!==u.status&&"tie"!==u.status,children:"Reset Game"}),(0,r.jsx)("button",{className:"button purple",onClick:C,children:"Back to Home"})]})]})},c=a.memo(l)}}]);
//# sourceMappingURL=51.7fd945cc.chunk.js.map